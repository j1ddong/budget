<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Budget</title>
		<!-- css -->
		<link rel="stylesheet" href="./css/main.css" />
		<!-- chart js -->
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	</head>

	<body>
		<div class="container">
			<header>
				<h1 id="website-name">Budget</h1>
				<nav>
					<span><a href="tableCalculator.html">Main Page</a></span>
					<span id="history"><a href="./index.html">Statistics</a></span>
					<span id="calculator"><a href="calculator.html">Calculator</a></span>
				</nav>
			</header>
			<main>
				<div class="budgetContainer">
					<div class="boxContainer">
						<p class="budgetText">INCOME</p>
						<div class="box income">0</div>
					</div>
					<div class="boxContainer">
						<p class="budgetText">EXPENSES</p>
						<div class="box expenses">0</div>
					</div>
					<div class="boxContainer">
						<p class="budgetText">TOTAL</p>
						<div class="box total">0</div>
					</div>
				</div>
				<div class="graph wrapper">
					<div class="graphCircle">
						<canvas id="expenses_circle" class="graphCanvas"></canvas>
					</div>
					<div class="graphBar">
						<canvas id="expenses_bar"></canvas>
					</div>
				</div>
			</main>
		</div>

		<script>
			window.onload = function () {
				// drawing a doughnut chart graph
				const circle = document
					.querySelector('#expenses_circle')
					.getContext('2d');

				let Expense1 = localStorage.getItem('Expense1');
				let Expense2 = localStorage.getItem('Expense2');
				let Expense3 = localStorage.getItem('Expense3');
				let Expense4 = localStorage.getItem('Expense4');
				let Expense6 = localStorage.getItem('Expense6');
				let Expense7 = localStorage.getItem('Expense7');

				new Chart(circle, {
					type: 'doughnut',
					data: {
						labels: [
							'Rent',
							'Utilities',
							'Transport',
							'Food',
							'Health',
							'Clothing',
						],
						datasets: [
							{
								data: [
									Expense1,
									Expense2,
									Expense3,
									Expense4,
									Expense6,
									Expense7,
								],
								backgroundColor: [
									'rgb(255, 99, 132, .5)',
									'rgb(255, 159, 64, .5)',
									'rgb(255, 205, 86, .5)',
									'rgb(75, 192, 192, .5)',
									'rgb(54, 162, 235, .5)',
									'rgb(153, 102, 255, .5)',
									'rgb(201, 203, 207, .5)',
								],
							},
						],
					},
					options: {
						responsive: false,
					},
				});

				// drawing a bar chart graph
				const ctx = document.getElementById('expenses_bar');
				let income1 = localStorage.getItem('Income1');
				let income2 = localStorage.getItem('Income2');
				let income3 = localStorage.getItem('Income3');
				const data = {
					labels: ['Salary', 'Investment', 'Savings'],
					datasets: [
						{
							label: 'My Incomes',
							data: [income1, income2, income3],
							backgroundColor: [
								'rgba(255, 99, 132, 0.2)',
								'rgba(255, 159, 64, 0.2)',
								'rgba(255, 205, 86, 0.2)',
							],
							borderColor: [
								'rgb(255, 99, 132)',
								'rgb(255, 159, 64)',
								'rgb(255, 205, 86)',
							],
							borderWidth: 1,
							barThickness: 90,
						},
					],
				};

				new Chart(ctx, {
					type: 'bar',
					data: data,
					options: {
						scales: {
							y: {
								beginAtZero: true,
							},
						},
					},
				});
			};
		</script>
	</body>
	<script>
		let income = localStorage.getItem('incomeSum');
		let expense = localStorage.getItem('expenseSum');
		let total = localStorage.getItem('total');
		document.getElementsByClassName('income')[0].innerText = income;
		document.getElementsByClassName('expenses')[0].innerText = expense;
		document.getElementsByClassName('total')[0].innerText = total;
	</script>
</html>
